/*! Rappid v3.0.0 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2019-08-09 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(t,z){"use strict";var i={layout:function(t,f){var i;i=t instanceof z.dia.Graph?t:(new z.dia.Graph).resetCells(t,{dry:!0,sort:!1}),t=null,f=f||{};var e=i.getElements(),d=f.columns||1,r=Math.ceil(e.length/d),g=f.dx||0,v=f.dy||0,p=void 0===f.centre||!1!==f.centre,_=!!f.resizeToFit,h=f.marginX||0,n=f.marginY||0,w=[],a=f.columnWidth;if("compact"===a)for(var o=0;o<d;o++){var u=this._elementsAtColumn(e,o,d);w.push(this._maxDim(u,"width")+g)}else{a&&!z.util.isString(a)||(a=this._maxDim(e,"width")+g);for(var s=0;s<d;s++)w.push(a)}var y=this._accumulate(w,h),x=[],c=f.rowHeight;if("compact"===c)for(var l=0;l<r;l++){var m=this._elementsAtRow(e,l,d);x.push(this._maxDim(m,"height")+v)}else{c&&!z.util.isString(c)||(c=this._maxDim(e,"height")+v);for(var j=0;j<r;j++)x.push(c)}var D=this._accumulate(x,n);i.startBatch("layout"),e.forEach(function(t,i){var e=i%d,r=Math.floor(i/d),h=w[e],n=x[r],a=0,o=0,u=t.get("size");if(_){var s=h-2*g,c=n-2*v,l=u.height*(u.width?s/u.width:1),m=u.width*(u.height?c/u.height:1);n<l?s=m:c=l,u={width:s,height:c},t.set("size",u,f)}p&&(a=(h-u.width)/2,o=(n-u.height)/2),t.position(y[e]+g+a,D[r]+v+o,f)}),i.stopBatch("layout")},_maxDim:function(t,e){return t.reduce(function(t,i){return Math.max(i.get("size")[e],t)},0)},_elementsAtRow:function(t,i,e){for(var r=[],h=e*i,n=h+e;h<n;h++)r.push(t[h]);return r},_elementsAtColumn:function(t,i,e){for(var r=[],h=i,n=t.length;h<n;h+=e)r.push(t[h]);return r},_accumulate:function(t,i){return t.reduce(function(t,i,e){return t.push(t[e]+i),t},[i||0])}};t.GridLayout=i}(this.joint.layout=this.joint.layout||{},joint);