/*! Rappid v3.0.0 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2019-08-09 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(i,t,o,n){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var s=n.Dialog.extend({className:n.Dialog.prototype.className+" lightbox",options:o.util.merge({},n.Dialog.prototype.options,{closeButton:!0,modal:!0,downloadable:!1,downloadAction:"download",fileName:"Image",closeAnimation:{delay:2e3,duration:200,easing:"swing",properties:{opacity:0}},top:100,windowArea:.8,openAnimation:!1}),init:function(){if(o.util.bindAll(this,"startCloseAnimation","positionAndScale"),n.Dialog.prototype.init.apply(this,arguments),this.options.image&&(this.$image=t("<img/>").on("load",this.positionAndScale),this.options.content=this.$image),this.options.downloadable){var i={action:this.options.downloadAction,content:"Download",position:"center"};this.buttons=Array.isArray(this.buttons)?this.buttons.slice():[],this.buttons.push(i)}this.on("action:"+this.options.downloadAction,this.download),t(window).on("resize",this.positionAndScale),this.on("close:animation:complete",this.remove,this)},open:function(){return n.Dialog.prototype.open.apply(this,arguments),this.$image&&this.$image.attr("src",this.options.image),this.positionAndScale(),this.startOpenAnimation(),this},positionAndScale:function(){var i=this.$(".fg"),t=this.$(".body > img"),o=this.$(".titlebar"),n=this.$(".controls"),s=this.options.windowArea,e=window.innerWidth*s;this.$el.css("margin-top",this.options.top),o.css("width",e);var a=o.height(),h=n.height(),l=window.innerHeight*s-this.options.top-a-h;i.css({width:e,height:l});var p=t.width(),r=t.height();i.css({width:p,height:r}),o.css("width","auto"),o.hasClass("empty")||n.css("top",o.outerHeight())},download:function(){o.util.imageToDataUri(this.options.image,function(i,t){o.util.downloadDataUri(t,this.options.fileName)}.bind(this))},close:function(){return this.options.closeAnimation?this.startCloseAnimation():n.Dialog.prototype.close.apply(this,arguments),this},onRemove:function(){n.Dialog.prototype.onRemove.apply(this,arguments),t(window).off("resize",this.positionAndScale),this.$image&&this.$image.off("load",this.positionAndScale)},startCloseAnimation:function(){this.$el.animate(this.options.closeAnimation.properties,o.util.assign({complete:function(){this.trigger("close:animation:complete")}.bind(this)},this.options.closeAnimation))},startOpenAnimation:function(){this.$el.animate(o.util.assign({},this.options.openAnimation.properties,{height:this._foregroundHeight}),o.util.assign({complete:function(){this.trigger("open:animation:complete")}.bind(this)},this.options.openAnimation))}});i.Lightbox=s}(this.joint.ui=this.joint.ui||{},$,joint,joint.ui);