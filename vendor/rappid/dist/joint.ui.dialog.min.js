/*! Rappid v3.0.0 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2019-08-09 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(t,c,n){"use strict";c=c&&c.hasOwnProperty("default")?c.default:c;var i=n.mvc.View.extend({className:"dialog",events:{"click .bg":"action","click .btn-close":"action","click .controls button":"action","mousedown .titlebar":"onDragStart","touchstart .titlebar":"onDragStart"},options:{draggable:!1,closeButtonContent:"&times;",closeButton:!0,inlined:!1,modal:!0,width:0,title:"",buttons:null,type:"",content:null},init:function(){n.util.bindAll(this,"onDrag","onDragEnd"),this.buttons=this.options.buttons},render:function(){var t=c("<div/>",{class:"bg","data-action":"close"}),i=c("<div/>",{class:"fg"}),o=c("<div/>",{class:"titlebar"}),n=c("<div/>",{class:"body"}),s=c("<button/>",{class:"btn-close","data-action":"close",html:this.options.closeButtonContent}),a=c("<div/>",{class:"controls"});if(this.$el.toggleClass("draggable",!!this.options.draggable),this.options.type&&this.$el.attr("data-type",this.options.type),this.options.inlined&&this.$el.addClass("inlined"),this.options.modal&&this.$el.addClass("modal"),this.options.width&&i.width(this.options.width),this.options.title?o.append(this.options.title):o.addClass("empty"),this.options.content&&n.append(this.options.content),this.buttons){var e=[],l=[],d=[];this.buttons.forEach(function(t){var i=c("<button/>",{class:"control-button",html:t.content,"data-action":t.action});t.position?"left"===t.position?(i.addClass(t.position),d.push(i)):"center"===t.position?(i.addClass(t.position),l.push(i)):(i.addClass(t.position),e.push(i)):e.push(i)}),e.reverse().forEach(function(t){a.append(t)}),d.forEach(function(t){a.append(t)}),l.forEach(function(t){a.append(t)})}return i.append(o,n,a),this.options.closeButton&&i.append(s),this.$el.empty().append(t,i),this},open:function(t){return this.delegateEvents(),this.on("action:close",this.close,this),c(document.body).on({"mousemove.dialog touchmove.dialog":this.onDrag,"mouseup.dialog touchend.dialog":this.onDragEnd}),c(t||document.body).append(this.render().el),this.$el.addClass("rendered"),this},close:function(){return this.remove(),this},onRemove:function(){c(document.body).off(".dialog",this.onDrag).off(".dialog",this.onDragStart)},action:function(t){var i=c(t.target).closest("[data-action]").attr("data-action");i&&this.trigger("action:"+i)},onDragStart:function(t){this.options.draggable&&(t=n.util.normalizeEvent(t),this._dx=t.clientX,this._dy=t.clientY,this._dragging=!0)},onDrag:function(t){if(this._dragging){t=n.util.normalizeEvent(t);var i=this.$(".fg"),o=i.offset();i.css({top:o.top+(t.clientY-this._dy),left:o.left+(t.clientX-this._dx),margin:0}),this._dx=t.clientX,this._dy=t.clientY}},onDragEnd:function(){this._dragging=!1}});t.Dialog=i}(this.joint.ui=this.joint.ui||{},$,joint);