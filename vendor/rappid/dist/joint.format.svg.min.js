/*! Rappid v3.0.0 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2019-08-09 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


this.joint=this.joint||{},function(e,f,h){"use strict";f=f&&f.hasOwnProperty("default")?f.default:f;function r(e,t,r){if(r=r||{},void 0===e)throw new Error("The the dia.Paper is a mandatory option.");e.trigger("beforeexport",r);var n=h.V(e.svg).clone(),o=n.findOne("."+h.util.addClassNamePrefix("layers")),i=r.area||e.paperToLocalRect(e.getContentBBox()),a=r.preserveDimensions;a&&n.attr({width:a.width||i.width,height:a.height||i.height}),n.removeAttr("style").attr("viewBox",[i.x,i.y,i.width,i.height].join(" ")),o.removeAttr("transform"),!1!==r.useComputedStyles&&function(e,t){for(var r=Array.from(e.querySelectorAll("*")),n=Array.from(t.querySelectorAll("*")),o=e.ownerDocument,i=o.styleSheets.length,a=[],s=i-1;0<=s;s--)a[s]=o.styleSheets[s],o.styleSheets[s].disabled=!0;var l={};r.forEach(function(e,t){var r=window.getComputedStyle(e,null),n={};h.util.forIn(r,function(e){n[e]=r.getPropertyValue(e)}),l[t]=n}),i!=o.styleSheets.length&&a.forEach(function(e,t){o.styleSheets[t]=e});for(var u=0;u<i;u++)o.styleSheets[u].disabled=!1;var c={};r.forEach(function(e,t){var r=window.getComputedStyle(e,null),n=l[t],o={};h.util.forIn(r,function(e){isNaN(e)&&r.getPropertyValue(e)!==n[e]&&(o[e]=r.getPropertyValue(e))}),c[t]=o}),n.forEach(function(e,t){f(e).css(c[t])})}(e.svg,n.node);var s=r.stylesheet;if(h.util.isString(s)&&function(e,t){var r=e.ownerDocument.implementation.createDocument(null,"xml",null);h.V(e).prepend(h.V("style",{type:"text/css"},[r.createCDATASection(t)]))}(n.node,s),e.trigger("afterexport",r),r.convertImagesToDataUris){var l=n.find("image").map(u);f.when.apply(f,l).then(function(){t(c(n.node))})}else t(c(n.node))}function u(r){var n=f.Deferred(),e=r.attr("xlink:href")||r.attr("href");return h.util.imageToDataUri(e,function(e,t){!e&&t&&r.attr("xlink:href",t),n.resolve()}),n.promise()}function c(e){return(new XMLSerializer).serializeToString(e).replace(/&nbsp;/g,"Â ")}function n(e,t){var n=h.util.uniqueId("svg_output");r(e,function(e){var t=window.open("",n,"menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes"),r="data:image/svg+xml,"+encodeURIComponent(e);t.document.write('<img src="'+r+'" style="max-height:100%" />')},h.util.assign({convertImagesToDataUris:!0},t))}h.dia.Paper.prototype.toSVG=function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return r.apply(this,[this].concat(t))},h.dia.Paper.prototype.openAsSVG=function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return n.apply(this,[this].concat(t))},e.openAsSVG=n,e.toSVG=r}(this.joint.format=this.joint.format||{},$,joint);